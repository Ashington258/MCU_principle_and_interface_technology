# 汇编语言

- [汇编语言](#汇编语言)
  - [1 指令格式](#1-指令格式)
    - [1.1 单字节指令](#11-单字节指令)
    - [1.2 双字节指令](#12-双字节指令)
    - [1.3 三字节指令](#13-三字节指令)
  - [2 寻址方式](#2-寻址方式)
    - [2.1 寄存器寻址（工作寄存器R0~R7）](#21-寄存器寻址工作寄存器r0r7)
    - [2.2 直接寻址](#22-直接寻址)
    - [2.3 立即数寻址](#23-立即数寻址)
    - [2.4 寄存器间接寻址](#24-寄存器间接寻址)
    - [2.5 变址寻址](#25-变址寻址)
    - [2.6 相对寻址](#26-相对寻址)
    - [2.7 位寻址](#27-位寻址)
    - [2.8 总结](#28-总结)
  - [3 寻址方式注释规范](#3-寻址方式注释规范)

## 1 指令格式

![alt text](image.png)

**操作码是必要的**

### 1.1 单字节指令

![alt text](image-1.png)

### 1.2 双字节指令

![alt text](image-2.png)

### 1.3 三字节指令

![alt text](image-3.png)


## 2 寻址方式

**寻址方式**：如何找到存放操作数的地址，吧操作数提取出来。

<例如温度变量不是常量，找变量是多少>

### 2.1 寄存器寻址（工作寄存器R0~R7）

- **寄存器寻址**：由指令指出寄存器R0~R7中的某一个或者其他寄存器的内容作为操作数

- MOV A, R0;`R0是一个地址，吧R0地址的值读取出来，即是一个常数，放到地址A当中。` $(R_0)\rightarrow A$`括号代表取地址值`

- MOV P1, A;
- ADD A, R0;$(A)+(R0)\rightarrow A$`把A的数值取出来，和R0的值相加，再放回A中`


### 2.2 直接寻址

直接给出操作数所在的存储单元的地址，指令中操作数部分是操作数所在的地址。

对于SFR既可以使用他们的地址，也可以使用他们的名字。

- MOV A, 3AH; $(3AH)\rightarrow A$
- MOV A, P1;`P1是名字`
- MOV A, 90H;`90H是地址，两者都是等效的`


![alt text](image-5.png)
![alt text](image-4.png)

### 2.3 立即数寻址

**立即数就是常数，用#号表示**

![alt text](image-6.png)

**注意和寻址方式的区别，他没有取出地址的值**

```asm

MOV DPTR, #2000H ; $2000H\rightarrow DPTR$
                    ; $(DPH) = 20H$
                    ; $(DPL) = 00H$$

```

### 2.4 寄存器间接寻址

操作数的地址放在某个寄存器当中(寄存器本身就是地址，因此本质就是`地址的地址`)

```asm

MOV A, @R0 ;`((R0)) = (A)把R0中地址的地址给A`

```

![alt text](image-7.png)

把R0地址指向的值作为地址，取地址的值。就是@的作用，等价于地址的地址。

他增加了程序的灵活性。


### 2.5 变址寻址

![alt text](image-8.png)
![alt text](image-9.png)

### 2.6 相对寻址

![alt text](image-10.png)
![alt text](image-11.png)
![alt text](image-12.png)

### 2.7 位寻址

![alt text](image-13.png)

### 2.8 总结

![alt text](image-14.png)


## 3 寻址方式注释规范

![alt text](image-15.png)
![alt text](image-16.png)


| 符号          | 描述                                                                                               |
| ------------- | -------------------------------------------------------------------------------------------------- |
| Rn(n = 0~7)   | 当前选中中的工作寄存器组R0~R7                                                                      |
| Ri(I=0,1)     | 作为地址指针的两个工作寄存器，R0,R1                                                                |
| #data         | 8位立即数，即包含在指令中的8位常数。                                                               |
| #data16       | 16位立即数，即包含在指令中的16位常数。                                                             |
| direct        | 8位片内RAM单元（包括SFR）的直接地址。                                                              |
| addr11        | 11位目的地址，用于ACALL和AJMP指令中。目的地址必须在与下条指令地址相同的2KB程序存储器地址空间之内。 |
| addr16        | 16位目的地址，用于LCALL和LJMP指令中。目的地址在64KB程序存储器地址空间之内。                        |
| rel           | 补码形式的8位地址偏移量，以下指令第一字节地址为基值。地址偏移量在-128~+127范围内。                 |
| bit           | 片内RAM或SFR的直接寻址位地址。                                                                     |
| @             | 间接地址方式中，表示间址寄存器的符号。                                                             |
| /             | 位操作指令中，表示对该位先取反再参与操作，但不影响该位原值。                                       |
| (X)           | X中的内容。                                                                                        |
| ((x))         | 由X指出的地址单元中的内容。                                                                        |
| $\rightarrow$ | 指令操作流程，将箭头左边的内容送入箭头右边的单元。                                                 |

